<div id="card-container" ng-mouseenter="cardPreview.showMenu = true" ng-mouseleave="cardPreview.showMenu = false"
     cg-busy="{promise:cardPreview.card.loadPromise, message:'Loading card...', minDuration:1000}">
    <div class="card-image-bounds">
        <div class="card-image-drag-bounds" ng-style="cardPreview.dragBoundsStyle">
            <div class="card-image-container" ng-class="{'card-image-container-movable': cardPreview.edit}"
                 jqyoui-draggable="{containment:'position', onStop:'cardPreview.positionChanged'}"
                 data-drag="cardPreview.edit"
                 data-jqyoui-options="{{cardPreview.imageDragOptions}}" ng-style="cardPreview.imageContainerStyle"
                 >
                <img ng-if="!cardPreview.edit && cardPreview.card.image.image" class="card-image"
                     data-ng-src="data:{{cardPreview.card.image.type}};base64, {{cardPreview.card.image.image}}"
                     scale-card-image
                     dimensions="cardPreview.dimensions" callback="cardPreview.imageLoaded"/>
                <img ng-if="cardPreview.edit && cardPreview.originalImage" class="card-image"
                     data-ng-src="data:{{cardPreview.card.image.type}};base64, {{cardPreview.originalImage}}"
                     scale-card-image
                     dimensions="cardPreview.dimensions" callback="cardPreview.imageLoaded"/>
            </div>
        </div>
    </div>
    <span ng-show="cardPreview.edit && cardPreview.card.image.content" class="card-image-instruction">Drag image to reposition</span>

    <div class="card-mask">
        <img src="media/card/card_plain_stars_0.png" class="card_front"/>
        <img ng-src="{{cardPreview.getStarImage()}}" class="card-star-overlay"/>
    </div>

    <span ng-if="cardPreview.card.name" class="card-input card-name"
          readonly="readonly">{{cardPreview.card.name}}</span>

    <span type="number" min="0" max="10" class="card-input attack-val"
          readonly="readonly">{{cardPreview.card.attack}}</span>
    <span type="number" min="0" max="10" class="card-input defence-val"
          readonly="readonly">{{cardPreview.card.life}}</span>

    <span ng-if="cardPreview.card.actions[0] && cardPreview.card.actions[0].descriptions[1]._value != ''"
          class="card-input card-attack"
          readonly="readonly"><b>{{cardPreview.card.actions[0].names[1]._value}}: </b>{{cardPreview.card.actions[0].descriptions[1]._value}}</span>

    <span class="card-input card-text" placeholder="Enter card text ..."
          readonly="readonly">{{cardPreview.card.description}}</span>

    <div class="card-control-menu" ng-show="cardPreview.menu && cardPreview.showMenu">
        <md-button aria-label="edit" class="md-icon-button" ng-click="cardPreview.editCard()">
            <md-tooltip style="z-index:1000" class="button-tooltip" md-direction="top">
                Edit card
            </md-tooltip>
            <md-icon md-svg-icon="media/edit_icon.svg"></md-icon>
        </md-button>

        <md-button aria-label="delete" class="md-icon-button" ng-click="cardPreview.deleteCard()">
            <md-tooltip style="z-index:1000" class="button-tooltip" md-direction="top">
                Delete card
            </md-tooltip>
            <md-icon md-svg-icon="media/delete_icon.svg"></md-icon>
        </md-button>
    </div>
</div>
